From db5c312d56ba2dd9a0f71605e904fe3c90396630 Mon Sep 17 00:00:00 2001
From: Renesas Electronics Corporation <someone@renesas.com>
Date: Thu, 20 Jan 2022 11:19:32 +0700
Subject: [PATCH 5/8] Linux Guest: not to disable unused module clock because
 it can be used by HOST or other Guest

Change-Id: Ia3d0ba6a3c2cc10e802321cb1644fab18aa078ca
---
 drivers/clk/renesas/renesas-cpg-mssr.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/drivers/clk/renesas/renesas-cpg-mssr.c b/drivers/clk/renesas/renesas-cpg-mssr.c
index a67bc04bd5b1..01cb52c024c6 100644
--- a/drivers/clk/renesas/renesas-cpg-mssr.c
+++ b/drivers/clk/renesas/renesas-cpg-mssr.c
@@ -465,7 +465,7 @@ static void __init cpg_mssr_register_mod_clk(const struct mssr_mod_clk *mod,
 
 	init.name = mod->name;
 	init.ops = &cpg_mstp_clock_ops;
-	init.flags = CLK_SET_RATE_PARENT;
+	init.flags = CLK_SET_RATE_PARENT | CLK_IGNORE_UNUSED;
 	parent_name = __clk_get_name(parent);
 	init.parent_names = &parent_name;
 	init.num_parents = 1;
-- 
2.26.0

